<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Execute full model bootstrapping with ALE calculation on each bootstrap run"><title>model_bootstrap.R — model_bootstrap • ale</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="model_bootstrap.R — model_bootstrap"><meta property="og:description" content="Execute full model bootstrapping with ALE calculation on each bootstrap run"><meta property="og:image" content="https://tripartio.github.io/ale/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ale</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.20240208</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ale-intro.html">Introduction to the ale package</a>
    <a class="dropdown-item" href="../articles/ale-small-datasets.html">Analyzing small datasets (fewer than 2000 rows) with ALE</a>
    <a class="dropdown-item" href="../articles/ale-statistics.html">ALE-based statistics for statistical inference and effect sizes</a>
    <a class="dropdown-item" href="../articles/ale-x-datatypes.html">ale function handling of various datatypes for x</a>
    <a class="dropdown-item" href="../articles/ale-ALEPlot.html">Comparison between ALEPlot and ale packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tripartio/ale/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>model_bootstrap.R</h1>
      <small class="dont-index">Source: <a href="https://github.com/tripartio/ale/blob/HEAD/R/model_bootstrap.R" class="external-link"><code>R/model_bootstrap.R</code></a></small>
      <div class="d-none name"><code>model_bootstrap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Execute full model bootstrapping with ALE calculation on each bootstrap run</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">model_bootstrap</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  model_call_string <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  model_call_string_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  parallel <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span>logical <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>  model_packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>,</span>
<span>  boot_it <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  boot_alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  boot_centre <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ale"</span>, <span class="st">"model_stats"</span>, <span class="st">"model_coefs"</span><span class="op">)</span>,</span>
<span>  ale_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  tidy_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  glance_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>dataframe. Dataset that will be bootstrapped.</p></dd>


<dt>model</dt>
<dd><p>See documentation for <code><a href="ale.html">ale()</a></code></p></dd>


<dt>...</dt>
<dd><p>not used. Inserted to require explicit naming of subsequent arguments.</p></dd>


<dt>model_call_string</dt>
<dd><p>character string. If NULL, <code>model_bootstrap()</code> tries to
automatically detect and construct the call for bootstrapped datasets. If it cannot, the
function will fail early. In that case, a character string of the full call
for the model must be provided that includes <code>boot_data</code> as the data argument for the call.
See examples.</p></dd>


<dt>model_call_string_vars</dt>
<dd><p>character. Character vector of names of variables
included in <code>model_call_string</code> that are not columns in <code>data</code>.
If any such variables exist, they must be specified here or else parallel processing
will produce an error. If parallelization is disabled with <code>parallel = 0</code>,
then this is not a concern.</p></dd>


<dt>parallel</dt>
<dd><p>See documentation for <code><a href="ale.html">ale()</a></code></p></dd>


<dt>model_packages</dt>
<dd><p>See documentation for <code><a href="ale.html">ale()</a></code></p></dd>


<dt>boot_it</dt>
<dd><p>integer from 0 to Inf. Number of bootstrap iterations.
If boot_it = 0, then the model is run as normal once on the full <code>data</code> with
no bootstrapping.</p></dd>


<dt>seed</dt>
<dd><p>integer. Random seed. Supply this between runs to assure identical
bootstrap samples are generated each time on the same data.</p></dd>


<dt>boot_alpha</dt>
<dd><p>numeric. The confidence level for the bootstrap confidence intervals is
1 - boot_alpha. For example, the default 0.05 will give a 95% confidence
interval, that is, from the 2.5% to the 97.5% percentile.</p></dd>


<dt>boot_centre</dt>
<dd><p>See See documentation for <code><a href="ale.html">ale()</a></code></p></dd>


<dt>output</dt>
<dd><p>character vector. Which types of bootstraps to calculate and return:</p><ul><li><p>'ale': Calculate and return bootstrapped ALE data and plot.</p></li>
<li><p>'model_stats': Calculate and return bootstrapped overall model statistics.</p></li>
<li><p>'model_coefs': Calculate and return bootstrapped model coefficients.</p></li>
<li><p>'boot_data': Return full data for all bootstrap iterations. This data will always be calculated
because it is needed for the bootstrap averages. By default, it is not returned
except if included in this <code>output</code> argument.</p></li>
</ul></dd>


<dt>ale_options, tidy_options, glance_options</dt>
<dd><p>list of named arguments.
Arguments to pass to the <code><a href="ale.html">ale()</a></code>, <code><a href="https://broom.tidymodels.org/reference/reexports.html" class="external-link">broom::tidy()</a></code>, or <code><a href="https://broom.tidymodels.org/reference/reexports.html" class="external-link">broom::glance()</a></code> functions, respectively,
beyond (or overriding) the defaults. In particular, to obtain p-values for ALE
statistics, see the details.</p></dd>


<dt>silent</dt>
<dd><p>See documentation for <code><a href="ale.html">ale()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list with tibbles of the following elements (depending on values requested in
the <code>output</code> argument:</p><ul><li><p>model_stats: bootstrapped results from <code><a href="https://broom.tidymodels.org/reference/reexports.html" class="external-link">broom::glance()</a></code></p></li>
<li><p>model_coefs: bootstrapped results from <code><a href="https://broom.tidymodels.org/reference/reexports.html" class="external-link">broom::tidy()</a></code></p></li>
<li><p>ale: bootstrapped ALE results</p><ul><li><p>data: ALE data (see <code><a href="ale.html">ale()</a></code> for details about the format)</p></li>
<li><p>stats: ALE statistics. The same data is duplicated with different views
that might be variously useful. The column</p><ul><li><p>by_term: statistic, estimate, conf.low, median, mean, conf.high.
("term" means variable name.)
The column names are compatible with the <code>broom</code> package. The confidence intervals
are based on the <code><a href="ale.html">ale()</a></code> function defaults; they can be changed with the
<code>ale_options</code> argument. The estimate is the median or the mean, depending
on the <code>boot_centre</code> argument.</p></li>
<li><p>by_statistic: term, estimate, conf.low, median, mean, conf.high.</p></li>
<li><p>estimate: term, then one column per statistic Provided with the default
estimate. This view does not present confidence intervals.</p></li>
</ul></li>
<li><p>plots: ALE plots (see <code><a href="ale.html">ale()</a></code> for details about the format)</p></li>
</ul></li>
<li><p>boot_data: full bootstrap data (not returned by default)</p></li>
<li><p>other values: the <code>boot_it</code>, <code>seed</code>, <code>boot_alpha</code>, and <code>boot_centre</code> arguments that
were originally passed are returned for reference.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>No modelling results, with or without ALE, should be considered reliable without
being bootstrapped.
For large datasets with clear separation between training and testing samples,
<code><a href="ale.html">ale()</a></code> bootstraps the ALE results of the test data. However, when a dataset
is too small to be subdivided into training and test sets, then the entire
model should be bootstrapped. That is, multiple models should be trained,
one on each bootstrap sample. The reliable results are the average results
of all the bootstrap models, however many there are. For details, see
the vignette on small datasets or the details and examples below.</p>
<p><code>model_bootstrap()</code> automatically carries out full-model bootstrapping suitable
for small datasets. Specifically, it:</p><ul><li><p>Creates multiple bootstrap samples (default 100; the user can specify any number);</p></li>
<li><p>Creates a model on each bootstrap sample;</p></li>
<li><p>Calculates model overall statistics, variable coefficients, and ALE values
for each model on each bootstrap sample;</p></li>
<li><p>Calculates the mean, median, and lower and upper confidence intervals for
each of those values across all bootstrap samples.</p></li>
</ul><p><strong>P-values</strong>
The <code><a href="https://broom.tidymodels.org/reference/reexports.html" class="external-link">broom::tidy()</a></code> summary statistics will provide p-values as normal, but the
situation is somewhat complicated with p-values for ALE statistics. The challenge
is that the procedure for obtaining their p-values is very slow: it involves
retraining the model 1000 times. Thus, it is not efficient to calculate p-values
on every execution of <code>model_bootstrap()</code>. Although the <code><a href="ale.html">ale()</a></code> function provides
an 'auto' option for creating p-values,
that option is disabled in <code>model_bootstrap()</code> because it would be far too slow:
it would involve retraining the model 1000 times the number of bootstrap iterations.
Rather, you must first create a p-values function object using the procedure
described in <code><a href="create_p_funs.html">help(create_p_funs)</a></code>. If the name of your p-values object is
<code>p_funs</code>, you can then request p-values each time you run <code>model_bootstrap()</code>
by passing it the argument <code>ale_options = list(p_values = p_funs)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Okoli, Chitu. 2023.
“Statistical Inference Using Machine Learning and Classical Techniques Based
on Accumulated Local Effects (ALE).” arXiv. <a href="https://arxiv.org/abs/2310.09877" class="external-link">https://arxiv.org/abs/2310.09877</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># attitude dataset</span></span></span>
<span class="r-in"><span><span class="va">attitude</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    rating complaints privileges learning raises critical advance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      43         51         30       39     61       92      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      63         64         51       54     63       73      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      71         70         68       69     76       86      48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      61         63         45       47     54       84      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      81         78         56       66     71       83      47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      43         55         49       44     54       49      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      58         67         42       56     66       68      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      71         75         50       55     70       66      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      72         82         72       67     71       83      31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     67         61         45       47     62       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     64         53         53       58     58       67      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     67         60         47       39     59       74      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     69         62         57       42     55       63      25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     68         83         83       45     59       77      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     77         77         54       72     79       77      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     81         90         50       72     60       54      36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     74         85         64       69     79       79      63</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     65         60         65       75     55       80      60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     65         70         46       57     75       85      46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     50         58         68       54     64       78      52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21     50         40         33       34     43       64      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22     64         61         52       62     66       80      41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23     53         66         52       50     63       80      37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24     40         37         42       58     50       57      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25     63         54         42       48     66       75      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26     66         77         66       63     88       76      72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27     78         75         58       74     80       78      49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28     48         57         44       45     51       83      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29     85         85         71       71     77       74      55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30     82         82         39       59     64       78      39</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ALE for general additive models (GAM)</span></span></span>
<span class="r-in"><span><span class="co">## GAM is tweaked to work on the small dataset.</span></span></span>
<span class="r-in"><span><span class="va">gam_attitude</span> <span class="op">&lt;-</span> <span class="fu">mgcv</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">gam</a></span><span class="op">(</span><span class="va">rating</span> <span class="op">~</span> <span class="va">complaints</span> <span class="op">+</span> <span class="va">privileges</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">learning</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                            <span class="va">raises</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">critical</span><span class="op">)</span> <span class="op">+</span> <span class="va">advance</span>,</span></span>
<span class="r-in"><span>                          data <span class="op">=</span> <span class="va">attitude</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">gam_attitude</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Family: gaussian </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Link function: identity </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rating ~ complaints + privileges + s(learning) + raises + s(critical) + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     advance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parametric coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept) 36.97245   11.60967   3.185 0.004501 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> complaints   0.60933    0.13297   4.582 0.000165 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> privileges  -0.12662    0.11432  -1.108 0.280715    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> raises       0.06222    0.18900   0.329 0.745314    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> advance     -0.23790    0.14807  -1.607 0.123198    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Approximate significance of smooth terms:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               edf Ref.df     F p-value  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(learning) 1.923  2.369 3.761  0.0312 *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(critical) 2.296  2.862 3.272  0.0565 .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> R-sq.(adj) =  0.776   Deviance explained = 83.9%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GCV = 47.947  Scale est. = 33.213    n = 30</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Full model bootstrapping</span></span></span>
<span class="r-in"><span><span class="co"># Only 4 bootstrap iterations for a rapid example; default is 100</span></span></span>
<span class="r-in"><span><span class="co"># Increase value of boot_it for more realistic results</span></span></span>
<span class="r-in"><span><span class="va">mb_gam</span> <span class="op">&lt;-</span> <span class="fu">model_bootstrap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">attitude</span>,</span></span>
<span class="r-in"><span>  <span class="va">gam_attitude</span>,</span></span>
<span class="r-in"><span>  boot_it <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>  model_packages <span class="op">=</span> <span class="st">'mgcv'</span>,  <span class="co"># required for parallel processing</span></span></span>
<span class="r-in"><span>  parallel <span class="op">=</span> <span class="fl">2</span>  <span class="co"># CRAN limit (delete this line on your own computer)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If the model is not standard, supply model_call_string with</span></span></span>
<span class="r-in"><span><span class="co"># 'data = boot_data' in the string (not as a direct argument to [model_bootstrap()])</span></span></span>
<span class="r-in"><span><span class="va">mb_gam</span> <span class="op">&lt;-</span> <span class="fu">model_bootstrap</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">attitude</span>,</span></span>
<span class="r-in"><span>  model_call_string <span class="op">=</span> <span class="st">'mgcv::gam(</span></span></span>
<span class="r-in"><span><span class="st">    rating ~ complaints + privileges + s(learning) +</span></span></span>
<span class="r-in"><span><span class="st">      raises + s(critical) + advance,</span></span></span>
<span class="r-in"><span><span class="st">    data = boot_data</span></span></span>
<span class="r-in"><span><span class="st">  )'</span>,</span></span>
<span class="r-in"><span>  boot_it <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>  model_packages <span class="op">=</span> <span class="st">'mgcv'</span>,  <span class="co"># required for parallel processing</span></span></span>
<span class="r-in"><span>  parallel <span class="op">=</span> <span class="fl">2</span>  <span class="co"># CRAN limit (delete this line on your own computer)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model statistics and coefficients</span></span></span>
<span class="r-in"><span><span class="va">mb_gam</span><span class="op">$</span><span class="va">model_stats</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name        estimate conf.low  mean median conf.high    sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> df              18.2    15.2   18.2   18.5      20.8  2.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> df.residual     11.8     9.15  11.8   11.5      14.8  2.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> nobs            30      30     30     30        30    0   </span>
<span class="r-in"><span><span class="va">mb_gam</span><span class="op">$</span><span class="va">model_coefs</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   term        estimate conf.low  mean median conf.high std.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> s(learning)     8.41     7.41  8.41   8.65      8.99     0.771</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> s(critical)     4.84     1.40  4.84   5.65      6.90     2.60 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot ALE</span></span></span>
<span class="r-in"><span><span class="va">mb_gam</span><span class="op">$</span><span class="va">ale</span><span class="op">$</span><span class="va">plots</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/wrap_plots.html" class="external-link">wrap_plots</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="model_bootstrap-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Chitu Okoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

