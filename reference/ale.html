<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ALE data and statistics that describe a trained model — ALE • ale</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ALE data and statistics that describe a trained model — ALE"><meta name="description" content="An ALE S7 object contains ALE data and statistics. For details, see vignette('ale-intro') or the details and examples below."><meta property="og:description" content="An ALE S7 object contains ALE data and statistics. For details, see vignette('ale-intro') or the details and examples below."><meta property="og:image" content="https://tripartio.github.io/ale/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ale</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.20250217</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ale-ALEPlot.html">Comparison between ALEPlot and ale packages</a></li>
    <li><a class="dropdown-item" href="../articles/ale-intro.html">Introduction to the ale package</a></li>
    <li><a class="dropdown-item" href="../articles/ale-small-datasets.html">Analyzing small datasets (fewer than 2000 rows) with ALE</a></li>
    <li><a class="dropdown-item" href="../articles/ale-statistics.html">ALE-based statistics for statistical inference and effect sizes</a></li>
    <li><a class="dropdown-item" href="../articles/ale-x-datatypes.html">ale function handling of various datatypes for x</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tripartio/ale/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ALE data and statistics that describe a trained model</h1>
      <small class="dont-index">Source: <a href="https://github.com/tripartio/ale/blob/main/R/ale.R" class="external-link"><code>R/ale.R</code></a></small>
      <div class="d-none name"><code>ale.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>An <code>ALE</code> S7 object contains ALE data and statistics. For details, see <code><a href="../articles/ale-intro.html">vignette('ale-intro')</a></code> or the details and examples below.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ALE</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  x_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>d1 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  exclude_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://parallelly.futureverse.org/reference/availableCores.html" class="external-link">availableCores</a></span><span class="op">(</span>logical <span class="op">=</span> <span class="cn">FALSE</span>, omit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  model_packages <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_stats <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_conf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_boot_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pred_fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span>, <span class="va">type</span> <span class="op">=</span> <span class="va">pred_type</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span>object <span class="op">=</span></span>
<span>    <span class="va">object</span>, newdata <span class="op">=</span> <span class="va">newdata</span>, type <span class="op">=</span> <span class="va">type</span><span class="op">)</span></span>
<span> <span class="op">}</span>,</span>
<span>  pred_type <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>  p_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  p_alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  max_num_bins <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  boot_it <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  boot_alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  boot_centre <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  y_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  median_band_pct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  sample_size <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  .bins <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>model object. Required. Model for which ALE should be calculated. May be any kind of R object that can make predictions from data.</p></dd>


<dt id="arg-x-cols-exclude-cols">x_cols, exclude_cols<a class="anchor" aria-label="anchor" href="#arg-x-cols-exclude-cols"></a></dt>
<dd><p>character, list, or formula. Columns names from <code>data</code> requested in one of the special <code>x_cols</code> formats for which ALE data is to be calculated. Defaults to 1D ALE for all columns in <code>data</code> except <code>y_col</code>. See details in the documentation for <code><a href="resolve_x_cols.html">resolve_x_cols()</a></code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>dataframe. Dataset from which to create predictions for the ALE. It should normally be the same dataset on which <code>model</code> was trained. If not provided, <code>ALE()</code> will try to detect it automatically. For non-standard models, <code>data</code> should be provided.</p></dd>


<dt id="arg-y-col">y_col<a class="anchor" aria-label="anchor" href="#arg-y-col"></a></dt>
<dd><p>character(1). Name of the outcome target label (y) variable. If not provided, <code>ALE()</code> will try to detect it automatically. For non-standard models, <code>y_col</code> should be provided. For survival models, set <code>y_col</code> to the name of the binary event column; in that case, <code>pred_type</code> should also be specified.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>not used. Inserted to require explicit naming of subsequent arguments.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>non-negative integer(1). Number of parallel threads (workers or tasks) for parallel execution of the function. Set <code>parallel = 0</code> to disable parallel processing. See details.</p></dd>


<dt id="arg-model-packages">model_packages<a class="anchor" aria-label="anchor" href="#arg-model-packages"></a></dt>
<dd><p>character. Character vector of names of packages that <code>model</code> depends on that might not be obvious with parallel processing. If you get weird error messages when parallel processing is enabled (which is the default) but they are resolved by setting <code>parallel = 0</code>, you might need to specify <code>model_packages</code>. See details.</p></dd>


<dt id="arg-output-stats">output_stats<a class="anchor" aria-label="anchor" href="#arg-output-stats"></a></dt>
<dd><p>logical(1). If <code>TRUE</code> (default), return ALE statistics.</p></dd>


<dt id="arg-output-conf">output_conf<a class="anchor" aria-label="anchor" href="#arg-output-conf"></a></dt>
<dd><p>logical(1). If <code>TRUE</code> (default), return ALE confidence regions. If <code>output_stats</code> is <code>FALSE</code>, <code>output_conf</code> is ignored since confidence regions cannot be produced without ALE statistics.</p></dd>


<dt id="arg-output-boot-data">output_boot_data<a class="anchor" aria-label="anchor" href="#arg-output-boot-data"></a></dt>
<dd><p>logical(1). If <code>TRUE</code>, return the raw ALE data for each bootstrap iteration. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-pred-fun-pred-type">pred_fun, pred_type<a class="anchor" aria-label="anchor" href="#arg-pred-fun-pred-type"></a></dt>
<dd><p>function,character(1). <code>pred_fun</code> is a function that returns a vector of predicted values of type <code>pred_type</code> from <code>model</code> on <code>data</code>. See details.</p></dd>


<dt id="arg-p-values">p_values<a class="anchor" aria-label="anchor" href="#arg-p-values"></a></dt>
<dd><p>instructions for calculating p-values and to determine the median band. If <code>NULL</code> (default), no p-values are calculated and <code>median_band_pct</code> is used to determine the median band. To calculate p-values, an <code><a href="ALEpDist.html">ALEpDist()</a></code> object must be provided here. If <code>p_values</code> is set to 'auto', this <code>ALE()</code> function will try to automatically create the p-values distribution; this only works with standard R model types. An error message will be given if p-values cannot be generated. Any other input provided to this argument will result in an error. For more details about creating p-values, see documentation for <code><a href="ALEpDist.html">ALEpDist()</a></code>. Note that p-values will not be generated if <code>output_stats</code> is <code>FALSE</code>.</p></dd>


<dt id="arg-p-alpha">p_alpha<a class="anchor" aria-label="anchor" href="#arg-p-alpha"></a></dt>
<dd><p>numeric length 2 from 0 to 1. Alpha for "confidence interval" ranges for printing bands around the median for single-variable plots. These are the default values used if <code>p_values</code> are provided. If <code>p_values</code> are not provided, then <code>median_band_pct</code> is used instead. The inner band range will be the median value of y ± <code>p_alpha[2]</code> of the relevant ALE statistic (usually ALE range or normalized ALE range). For plots with a second outer band, its range will be the median ± <code>p_alpha[1]</code>. For example, in the ALE plots, for the default <code>p_alpha = c(0.01, 0.05)</code>, the inner band will be the median ± ALE minimum or maximum at p = 0.05 and the outer band will be the median ± ALE minimum or maximum at p = 0.01.</p></dd>


<dt id="arg-max-num-bins">max_num_bins<a class="anchor" aria-label="anchor" href="#arg-max-num-bins"></a></dt>
<dd><p>positive integer(1). Maximum number of bins for numeric <code>x_cols</code> variables. The number of bins is eventually the lower of the number of unique values of a numeric variable and <code>max_num_bins</code>.</p></dd>


<dt id="arg-boot-it">boot_it<a class="anchor" aria-label="anchor" href="#arg-boot-it"></a></dt>
<dd><p>non-negative integer(1). Number of bootstrap iterations for data-only bootstrapping on ALE data. This is appropriate for models that have been developed with cross-validation. For models that have not been validated, full-model bootstrapping should be used instead with the <code>ModelBoot</code> class. See details there. The default <code>boot_it = 0</code> turns off bootstrapping.</p></dd>


<dt id="arg-boot-alpha">boot_alpha<a class="anchor" aria-label="anchor" href="#arg-boot-alpha"></a></dt>
<dd><p>numeric(1) from 0 to 1. Alpha for percentile-based confidence interval range for the bootstrap intervals; the bootstrap confidence intervals will be the lowest and highest <code>(1 - 0.05) / 2</code> percentiles. For example, if <code>boot_alpha = 0.05</code> (default), the intervals will be from the 2.5 and 97.5 percentiles.</p></dd>


<dt id="arg-boot-centre">boot_centre<a class="anchor" aria-label="anchor" href="#arg-boot-centre"></a></dt>
<dd><p>character(1) in c('mean', 'median'). When bootstrapping, the main estimate for the ALE y value is considered to be <code>boot_centre</code>. Regardless of the value specified here, both the mean and median will be available.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>integer(1). Random seed. Supply this between runs to assure that identical random ALE data is generated each time when bootstrapping. Without bootstrapping, ALE is a deterministic algorithm that should result in identical results each time regardless of the seed specified.</p></dd>


<dt id="arg-y-type">y_type<a class="anchor" aria-label="anchor" href="#arg-y-type"></a></dt>
<dd><p>character(1) in c('binary', 'numeric', 'categorical', 'ordinal'). Datatype of the y (outcome) variable. Normally determined automatically; only provide if an error message for a complex non-standard model requires it.</p></dd>


<dt id="arg-median-band-pct">median_band_pct<a class="anchor" aria-label="anchor" href="#arg-median-band-pct"></a></dt>
<dd><p>numeric length 2 from 0 to 1. Alpha for "confidence interval" ranges for printing bands around the median for single-variable plots. These are the default values used if <code>p_values</code> are not provided. If <code>p_values</code> are provided, then <code>median_band_pct</code> is ignored. The inner band range will be the median value of y ± <code>median_band_pct[1]/2</code>. For plots with a second outer band, its range will be the median ± <code>median_band_pct[2]/2</code>. For example, for the default <code>median_band_pct = c(0.05, 0.5)</code>, the inner band will be the median ± 2.5% and the outer band will be the median ± 25%.</p></dd>


<dt id="arg-sample-size">sample_size<a class="anchor" aria-label="anchor" href="#arg-sample-size"></a></dt>
<dd><p>non-negative integer(1). Size of the sample of <code>data</code> to be returned with the <code>ALE</code> object. This is primarily used for rug plots. See the <code>min_rug_per_interval</code> argument.</p></dd>


<dt id="arg--bins">.bins<a class="anchor" aria-label="anchor" href="#arg--bins"></a></dt>
<dd><p>Internal. List of ALE bin and n count vectors. If provided, these vectors will be used to set the intervals of the ALE x axis for each variable. By default (NULL), <code>ALE()</code> automatically calculates the bins. <code>.bins</code> is normally used in advanced analyses where the bins from a previous analysis are reused for subsequent analyses (for example, for full model bootstrapping with <code><a href="ModelBoot.html">ModelBoot()</a></code>).</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>logical(1), default <code>FALSE.</code> If <code>TRUE</code>, do not display any non-essential messages during execution (such as progress bars). Regardless, any warnings and errors will always display. See details for how to enable progress bars.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>ALE</code> with properties <code>distinct</code> and <code>params</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="properties">Properties<a class="anchor" aria-label="anchor" href="#properties"></a></h2>


<dl><dt>distinct</dt>
<dd><p>Stores the optional ALE data, ALE statistics, and bootstrap data for one or more categories.</p></dd>

<dt>params</dt>
<dd><p>The parameters used to calculate the ALE data. These include most of the arguments used to construct the <code>ALE</code> object. These are either the values provided by the user or used by default if the user did not change them but also includes several objects that are created within the constructor. These extra objects are described here, as well as those parameters that are stored differently from the form in the arguments:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">max_d</span><span class="st">`</span><span class="sc">:</span> the highest dimension of ALE data present. If only <span class="dv">1</span>D ALE is present, then <span class="st">`</span><span class="at">max_d == 1</span><span class="st">`</span>. If even one <span class="dv">2</span>D ALE element is <span class="fu">present</span> (even with no <span class="dv">1</span>D), then <span class="st">`</span><span class="at">max_d == 2</span><span class="st">`</span>.</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">requested_x_cols</span><span class="st">`</span>,<span class="st">`</span><span class="at">ordered_x_cols</span><span class="st">`</span><span class="sc">:</span> <span class="st">`</span><span class="at">requested_x_cols</span><span class="st">`</span> is the resolved list of <span class="st">`</span><span class="at">x_cols</span><span class="st">`</span> as requested by the <span class="fu">user</span> (that is, <span class="st">`</span><span class="at">x_cols</span><span class="st">`</span> minus <span class="st">`</span><span class="at">exclude_cols</span><span class="st">`</span>). <span class="st">`</span><span class="at">ordered_x_cols</span><span class="st">`</span> is the same set of <span class="st">`</span><span class="at">x_cols</span><span class="st">`</span> but arranged <span class="cf">in</span> the internal storage order.</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">y_cats</span><span class="st">`</span><span class="sc">:</span> categories <span class="cf">for</span> categorical classification models. For non<span class="sc">-</span>categorical models, this is the same as <span class="st">`</span><span class="at">y_col</span><span class="st">`</span>.</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">y_type</span><span class="st">`</span><span class="sc">:</span> high<span class="sc">-</span>level datatype of the y outcome variable.</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">y_summary</span><span class="st">`</span><span class="sc">:</span> summary statistics of y values used <span class="cf">for</span> the ALE calculation. These statistics are based on the actual values of <span class="st">`</span><span class="at">y_col</span><span class="st">`</span> unless <span class="cf">if</span> <span class="st">`</span><span class="at">y_type</span><span class="st">`</span> is a probability or other value that is constrained <span class="cf">in</span> the <span class="st">`</span><span class="at">[0, 1]</span><span class="st">`</span> range. In that case, <span class="st">`</span><span class="at">y_summary</span><span class="st">`</span> is based on the predicted values of <span class="st">`</span><span class="at">y_col</span><span class="st">`</span> by applying <span class="st">`</span><span class="at">model</span><span class="st">`</span> to the <span class="st">`</span><span class="at">data</span><span class="st">`</span>. <span class="st">`</span><span class="at">y_summary</span><span class="st">`</span> is a named numeric vector. Most of the elements are the percentile of the y values. E.g., the <span class="st">'5%'</span> element is the <span class="dv">5</span>th percentile of y values. The following elements have special meanings<span class="sc">:</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="er">*</span> The first element is named either <span class="st">`</span><span class="at">p</span><span class="st">`</span> or <span class="st">`</span><span class="at">q</span><span class="st">`</span> and its value is always <span class="fl">0.</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  The value is not used; only the name of the element is meaningful.</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  <span class="st">`</span><span class="at">p</span><span class="st">`</span> means that the following special <span class="st">`</span><span class="at">y_summary</span><span class="st">`</span> elements are based on</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>  the provided <span class="st">`</span><span class="at">ALEpDist</span><span class="st">`</span> object. <span class="st">`</span><span class="at">q</span><span class="st">`</span> means that quantiles were calculated</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>  based on <span class="st">`</span><span class="at">median_band_pct</span><span class="st">`</span> because <span class="st">`</span><span class="at">p_values</span><span class="st">`</span> was not provided.</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">min</span><span class="st">`</span>, <span class="st">`</span><span class="at">mean</span><span class="st">`</span>, <span class="st">`</span><span class="at">max</span><span class="st">`</span><span class="sc">:</span> the minimum, mean, and maximum y values, respectively. Note that the median is <span class="st">`</span><span class="at">50%</span><span class="st">`</span>, the <span class="dv">50</span>th percentile.</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">med_lo_2</span><span class="st">`</span>, <span class="st">`</span><span class="at">med_lo</span><span class="st">`</span>, <span class="st">`</span><span class="at">med_hi</span><span class="st">`</span>, <span class="st">`</span><span class="at">med_hi_2</span><span class="st">`</span><span class="sc">:</span> <span class="st">`</span><span class="at">med_lo</span><span class="st">`</span> and <span class="st">`</span><span class="at">med_hi</span><span class="st">`</span> are the inner lower and upper confidence intervals of y values with respect to the <span class="fu">median</span> (<span class="st">`</span><span class="at">50%</span><span class="st">`</span>); <span class="st">`</span><span class="at">med_lo_2</span><span class="st">`</span> and <span class="st">`</span><span class="at">med_hi_2</span><span class="st">`</span> are the outer confidence intervals. See the documentation <span class="cf">for</span> the <span class="st">`</span><span class="at">p_alpha</span><span class="st">`</span> and <span class="st">`</span><span class="at">median_band_pct</span><span class="st">`</span> arguments to understand how these are determined.</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">model</span><span class="st">`</span><span class="sc">:</span> same as <span class="st">`</span><span class="at">ALE@params$model</span><span class="st">`</span> (see documentation there).</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="sc">*</span> <span class="st">`</span><span class="at">data</span><span class="st">`</span><span class="sc">:</span> same as <span class="st">`</span><span class="at">ALE@params$model</span><span class="st">`</span> (see documentation there).</span></code></pre><p></p></div></dd>


</dl></div>
    <div class="section level2">
    <h2 id="custom-predict-function">Custom predict function<a class="anchor" aria-label="anchor" href="#custom-predict-function"></a></h2>


<p>The calculation of ALE requires modifying several values of the original <code>data</code>. Thus, <code>ALE()</code> needs direct access to the <code>predict</code> function for the <code>model</code>. By default, <code>ALE()</code> uses a generic default <code>predict</code> function of the form <code>predict(object, newdata, type)</code> with the default prediction type of <code>'response'</code>. If, however, the desired prediction values are not generated with that format, the user must specify what they want. Very often, the only modification needed is to change the prediction type to some other value by setting the <code>pred_type</code> argument (e.g., to <code>'prob'</code> to generated classification probabilities). But if the desired predictions need a different function signature, then the user must create a custom prediction function and pass it to <code>pred_fun</code>. The requirements for this custom function are:</p><ul><li><p>It must take three required arguments and nothing else:</p><ul><li><p><code>object</code>: a model</p></li>
<li><p><code>newdata</code>: a dataframe or compatible table type such as a tibble or data.table</p></li>
<li><p><code>type</code>: a string; it should usually be specified as <code>type = pred_type</code>
These argument names are according to the R convention for the generic <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">stats::predict()</a></code> function.</p></li>
</ul></li>
<li><p>It must return a vector or matrix of numeric values as the prediction.</p></li>
</ul><p>You can see an example below of a custom prediction function.</p>
<p><strong>Note:</strong> <code>survival</code> models probably do not need a custom prediction function but <code>y_col</code> must be set to the name of the binary event column and <code>pred_type</code> must be set to the desired prediction type.</p>
    </div>
    <div class="section level2">
    <h2 id="ale-statistics">ALE statistics<a class="anchor" aria-label="anchor" href="#ale-statistics"></a></h2>


<p>For details about the ALE-based statistics (ALED, ALER, NALED, and NALER), see <code><a href="../articles/ale-statistics.html">vignette('ale-statistics')</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="parallel-processing">Parallel processing<a class="anchor" aria-label="anchor" href="#parallel-processing"></a></h2>


<p>Parallel processing using the <code>{furrr}</code> framework is enabled by default. By default, it will use all the available physical CPU cores (minus the core being used for the current R session) with the setting <code>parallel = future::availableCores(logical = FALSE, omit = 1)</code>. Note that only physical cores are used (not logical cores or "hyperthreading") because machine learning can only take advantage of the floating point processors on physical cores, which are absent from logical cores. Trying to use logical cores will not speed up processing and might actually slow it down with useless data transfer. If you will dedicate the entire computer to running this function (and you don't mind everything else becoming very slow while it runs), you may use all cores by setting <code>parallel = future::availableCores(logical = FALSE)</code>. To disable parallel processing, set <code>parallel = 0</code>.</p>
<p>#'  The <code>{ale}</code> package should be able to automatically recognize and load most packages that are needed, but with parallel processing enabled (which is the default), some packages might not be properly loaded. This problem might be indicated if you get a strange error message that mentions something somewhere about "progress interrupted" or "future", especially if you see such errors after the progress bars begin displaying (assuming you did not disable progress bars with <code>silent = TRUE</code>). In that case, first try disabling parallel processing with <code>parallel = 0</code>. If that resolves the problem, then to get faster parallel processing to work, try adding the package names needed for the <code>model</code> to this argument, e.g., <code>model_packages = c('tidymodels', 'mgcv')</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="progress-bars">Progress bars<a class="anchor" aria-label="anchor" href="#progress-bars"></a></h2>


<p>Progress bars are implemented with the <code>{progressr}</code> package, which lets the user fully control progress bars. To disable progress bars, set <code>silent = TRUE</code>. The first time a function is called in the <code>{ale}</code> package that requires progress bars, it checks if the user has activated the necessary <code>{progressr}</code> settings. If not, the <code>{ale}</code> package automatically enables <code>{progressr}</code> progress bars with the <code>cli</code> handler and prints a message notifying the user.</p>
<p>If you like the default progress bars and you want to make them permanent, you can add the following lines of code to your <code>.Rprofile</code> configuration file and they will become your defaults for every R session; you will not see the message again:</p>
<p></p><div class="sourceCode R"><pre><code><span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span>global <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span><span class="st">'cli'</span><span class="op">)</span></span></code></pre><p></p></div>
<p>This would apply not only to the <code>{ale}</code> package but to any package that uses <code>{progressr}</code> progress bars. For more details on formatting progress bars to your liking, see the introduction to the <a href="https://progressr.futureverse.org/articles/progressr-intro.html" class="external-link"><code>{progressr}</code> package</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Okoli, Chitu. 2023. “Statistical Inference Using Machine Learning and Classical Techniques Based on Accumulated Local Effects (ALE).” arXiv. <a href="https://arxiv.org/abs/2310.09877" class="external-link">https://arxiv.org/abs/2310.09877</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Sample 1000 rows from the ggplot2::diamonds dataset (for a simple example)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">diamonds_sample</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="va"><a href="https://ggplot2.tidyverse.org/reference/diamonds.html" class="external-link">diamonds</a></span><span class="op">)</span>, <span class="fl">1000</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a GAM model with flexible curves to predict diamond price</span></span></span>
<span class="r-in"><span><span class="co"># Smooth all numeric variables and include all other variables</span></span></span>
<span class="r-in"><span><span class="va">gam_diamonds</span> <span class="op">&lt;-</span> <span class="fu">mgcv</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">gam</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">price</span> <span class="op">~</span> <span class="fu">s</span><span class="op">(</span><span class="va">carat</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">depth</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">table</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="va">cut</span> <span class="op">+</span> <span class="va">color</span> <span class="op">+</span> <span class="va">clarity</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">diamonds_sample</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">gam_diamonds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Family: gaussian </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Link function: identity </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> price ~ s(carat) + s(depth) + s(table) + s(x) + s(y) + s(z) + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cut + color + clarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Parametric coefficients:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Intercept)  3421.412     74.903  45.678  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cut.L         261.339    171.630   1.523 0.128170    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cut.Q          53.684    129.990   0.413 0.679710    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cut.C         -71.942    103.804  -0.693 0.488447    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cut^4          -8.657     80.614  -0.107 0.914506    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> color.L     -1778.903    113.669 -15.650  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> color.Q      -482.225    104.675  -4.607 4.64e-06 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> color.C        58.724     95.983   0.612 0.540807    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> color^4       125.640     87.111   1.442 0.149548    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> color^5      -241.194     81.913  -2.945 0.003314 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> color^6       -49.305     74.435  -0.662 0.507883    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> clarity.L    4141.841    226.713  18.269  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> clarity.Q   -2367.820    217.185 -10.902  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> clarity.C    1026.214    180.295   5.692 1.67e-08 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> clarity^4    -602.066    137.258  -4.386 1.28e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> clarity^5     408.336    105.344   3.876 0.000113 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> clarity^6     -82.379     88.434  -0.932 0.351815    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> clarity^7       4.017     78.816   0.051 0.959362    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Approximate significance of smooth terms:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            edf Ref.df      F  p-value    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(carat) 7.503  8.536  4.114 3.65e-05 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(depth) 1.486  1.874  0.601 0.614753    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(table) 2.929  3.738  1.294 0.240011    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(x)     8.897  8.967  3.323 0.000542 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(y)     3.875  5.118 11.075  &lt; 2e-16 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> s(z)     9.000  9.000  2.648 0.004938 ** </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> R-sq.(adj) =   0.94   Deviance explained = 94.3%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GCV = 9.7669e+05  Scale est. = 9.262e+05  n = 1000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simple ALE without bootstrapping</span></span></span>
<span class="r-in"><span><span class="va">ale_gam_diamonds</span> <span class="op">&lt;-</span> <span class="fu">ALE</span><span class="op">(</span><span class="va">gam_diamonds</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Could not recover model data from environment. Please make sure your</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data is available in your workspace.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Trying to retrieve data from the model frame now.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in (function (.x, .f, ..., .progress = FALSE) {    map_("list", .x, .f, ..., .progress = .progress)})(.x = list("cut", "color", "clarity"), .f = function (...) {    {        ...furrr_chunk_seeds_i &lt;- ...furrr_chunk_seeds_env[["i"]]        ...furrr_chunk_seeds_env[["i"]] &lt;- ...furrr_chunk_seeds_i +             1L        assign(x = ".Random.seed", value = ...furrr_chunk_seeds[[...furrr_chunk_seeds_i]],             envir = globalenv(), inherits = FALSE)    }    NULL    ...furrr_out &lt;- ...furrr_fn(...)    ...furrr_out}):</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `map()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `predict.gam()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> newdata is a model.frame: it should contain all required variables</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot the ALE data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ale_gam_diamonds</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_gam_diamonds' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bootstrapped ALE</span></span></span>
<span class="r-in"><span><span class="co"># This can be slow, since bootstrapping runs the algorithm boot_it times</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create ALE with 100 bootstrap samples</span></span></span>
<span class="r-in"><span><span class="va">ale_gam_diamonds_boot</span> <span class="op">&lt;-</span> <span class="fu">ALE</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gam_diamonds</span>,</span></span>
<span class="r-in"><span>  boot_it <span class="op">=</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Could not recover model data from environment. Please make sure your</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data is available in your workspace.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Trying to retrieve data from the model frame now.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in (function (.x, .f, ..., .progress = FALSE) {    map_("list", .x, .f, ..., .progress = .progress)})(.x = list("cut", "color", "clarity"), .f = function (...) {    {        ...furrr_chunk_seeds_i &lt;- ...furrr_chunk_seeds_env[["i"]]        ...furrr_chunk_seeds_env[["i"]] &lt;- ...furrr_chunk_seeds_i +             1L        assign(x = ".Random.seed", value = ...furrr_chunk_seeds[[...furrr_chunk_seeds_i]],             envir = globalenv(), inherits = FALSE)    }    NULL    ...furrr_out &lt;- ...furrr_fn(...)    ...furrr_out}):</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `map()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `predict.gam()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> newdata is a model.frame: it should contain all required variables</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bootstrapped ALEs print with confidence intervals</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ale_gam_diamonds_boot</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_gam_diamonds_boot' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If the predict function you want is non-standard, you may define a</span></span></span>
<span class="r-in"><span><span class="co"># custom predict function. It must return a single numeric vector.</span></span></span>
<span class="r-in"><span><span class="va">custom_predict</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span>, <span class="va">type</span> <span class="op">=</span> <span class="va">pred_type</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span>, type <span class="op">=</span> <span class="va">type</span>, se.fit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">fit</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ale_gam_diamonds_custom</span> <span class="op">&lt;-</span> <span class="fu">ALE</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gam_diamonds</span>,</span></span>
<span class="r-in"><span>  pred_fun <span class="op">=</span> <span class="va">custom_predict</span>, pred_type <span class="op">=</span> <span class="st">'link'</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Could not recover model data from environment. Please make sure your</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data is available in your workspace.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Trying to retrieve data from the model frame now.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in (function (.x, .f, ..., .progress = FALSE) {    map_("list", .x, .f, ..., .progress = .progress)})(.x = list("cut", "color", "clarity"), .f = function (...) {    {        ...furrr_chunk_seeds_i &lt;- ...furrr_chunk_seeds_env[["i"]]        ...furrr_chunk_seeds_env[["i"]] &lt;- ...furrr_chunk_seeds_i +             1L        assign(x = ".Random.seed", value = ...furrr_chunk_seeds[[...furrr_chunk_seeds_i]],             envir = globalenv(), inherits = FALSE)    }    NULL    ...furrr_out &lt;- ...furrr_fn(...)    ...furrr_out}):</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `map()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `predict.gam()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> newdata is a model.frame: it should contain all required variables</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot the ALE data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ale_gam_diamonds_custom</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_gam_diamonds_custom' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># How to retrieve specific types of ALE data from an ALE object.</span></span></span>
<span class="r-in"><span><span class="va">ale_diamonds_with__boot_data</span> <span class="op">&lt;-</span> <span class="fu">ALE</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gam_diamonds</span>,</span></span>
<span class="r-in"><span>  <span class="co"># For detailed options for x_cols, see examples at resolve_x_cols()</span></span></span>
<span class="r-in"><span>  x_cols <span class="op">=</span> <span class="op">~</span> <span class="va">carat</span> <span class="op">+</span> <span class="va">cut</span> <span class="op">+</span> <span class="va">clarity</span> <span class="op">+</span> <span class="va">color</span><span class="op">:</span><span class="va">depth</span> <span class="op">+</span> <span class="va">x</span><span class="op">:</span><span class="va">y</span>,</span></span>
<span class="r-in"><span>  output_boot_data <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  boot_it <span class="op">=</span> <span class="fl">10</span>  <span class="co"># just for demonstration</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Could not recover model data from environment. Please make sure your</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data is available in your workspace.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Trying to retrieve data from the model frame now.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in (function (.x, .f, ..., .progress = FALSE) {    map_("list", .x, .f, ..., .progress = .progress)})(.x = list(c("color", "depth"), c("x", "y")), .f = function (...) {    {        ...furrr_chunk_seeds_i &lt;- ...furrr_chunk_seeds_env[["i"]]        ...furrr_chunk_seeds_env[["i"]] &lt;- ...furrr_chunk_seeds_i +             1L        assign(x = ".Random.seed", value = ...furrr_chunk_seeds[[...furrr_chunk_seeds_i]],             envir = globalenv(), inherits = FALSE)    }    NULL    ...furrr_out &lt;- ...furrr_fn(...)    ...furrr_out}):</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `map()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In index: 1.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `predict.gam()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> newdata is a model.frame: it should contain all required variables</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># See ?get.ALE for details on the various kinds of data that may be retrieved.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="get.html">get</a></span><span class="op">(</span><span class="va">ale_diamonds_with__boot_data</span>, <span class="op">~</span> <span class="va">carat</span> <span class="op">+</span> <span class="va">color</span><span class="op">:</span><span class="va">depth</span><span class="op">)</span>  <span class="co"># default ALE data</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_diamonds_with__boot_data' not found</span>
<span class="r-in"><span><span class="fu"><a href="get.html">get</a></span><span class="op">(</span><span class="va">ale_diamonds_with__boot_data</span>, what <span class="op">=</span> <span class="st">'boot_data'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_diamonds_with__boot_data' not found</span>
<span class="r-in"><span><span class="fu"><a href="get.html">get</a></span><span class="op">(</span><span class="va">ale_diamonds_with__boot_data</span>, stats <span class="op">=</span> <span class="st">'estimate'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_diamonds_with__boot_data' not found</span>
<span class="r-in"><span><span class="fu"><a href="get.html">get</a></span><span class="op">(</span><span class="va">ale_diamonds_with__boot_data</span>, stats <span class="op">=</span> <span class="st">'aled'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_diamonds_with__boot_data' not found</span>
<span class="r-in"><span><span class="fu"><a href="get.html">get</a></span><span class="op">(</span><span class="va">ale_diamonds_with__boot_data</span>, stats <span class="op">=</span> <span class="st">'all'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_diamonds_with__boot_data' not found</span>
<span class="r-in"><span><span class="fu"><a href="get.html">get</a></span><span class="op">(</span><span class="va">ale_diamonds_with__boot_data</span>, stats <span class="op">=</span> <span class="st">'conf_regions'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_diamonds_with__boot_data' not found</span>
<span class="r-in"><span><span class="fu"><a href="get.html">get</a></span><span class="op">(</span><span class="va">ale_diamonds_with__boot_data</span>, stats <span class="op">=</span> <span class="st">'conf_sig'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'ale_diamonds_with__boot_data' not found</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chitu Okoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

