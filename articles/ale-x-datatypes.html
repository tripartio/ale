<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ale">
<title>ale function handling of various datatypes for x • ale</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ale function handling of various datatypes for x">
<meta property="og:description" content="ale">
<meta property="og:image" content="https://tripartio.github.io/ale/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ale</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.20240212</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ale-intro.html">Introduction to the ale package</a>
    <a class="dropdown-item" href="../articles/ale-small-datasets.html">Analyzing small datasets (fewer than 2000 rows) with ALE</a>
    <a class="dropdown-item" href="../articles/ale-statistics.html">ALE-based statistics for statistical inference and effect sizes</a>
    <a class="dropdown-item" href="../articles/ale-x-datatypes.html">ale function handling of various datatypes for x</a>
    <a class="dropdown-item" href="../articles/ale-ALEPlot.html">Comparison between ALEPlot and ale packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tripartio/ale/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ale function handling of various datatypes for x</h1>
                        <h4 data-toc-skip class="author">Chitu
Okoli</h4>
            
            <h4 data-toc-skip class="date">January 9, 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tripartio/ale/blob/HEAD/vignettes/ale-x-datatypes.Rmd" class="external-link"><code>vignettes/ale-x-datatypes.Rmd</code></a></small>
      <div class="d-none name"><code>ale-x-datatypes.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates how <code>ale</code> works for various
datatypes of input (x) values. You should first read the <a href="ale-intro.html" title="Introduction to the ale package">introductory vignette</a> that
explains general functionality of the package; this vignette is a
demonstration of specific functionality.</p>
<p>We begin by loading the necessary libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tripartio/ale" class="external-link">ale</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="section level2">
<h2 id="var_cars-modified-mtcars-dataset-motor-trend-car-road-tests">
<code>var_cars</code>: modified <code>mtcars</code> dataset (Motor
Trend Car Road Tests)<a class="anchor" aria-label="anchor" href="#var_cars-modified-mtcars-dataset-motor-trend-car-road-tests"></a>
</h2>
<p>For this demonstration, we use a modified version of the built-in
<code>mtcars</code> dataset so that it has binary (logical), multinomial
(factor, that is, non-ordered categories), ordinal (ordered factor),
discrete interval (integer), and continuous interval (numeric or double)
values. This modified version, called <code>var_cars</code>, will let us
test all the different basic variations of x variables. For the factor,
it adds the country of the car manufacturer.</p>
<p>The data is a tibble with 32 observations on 12 variables:</p>
<table class="table">
<thead><tr class="header">
<th>Variable</th>
<th>Format</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>mpg</td>
<td>double</td>
<td>Miles/(US) gallon</td>
</tr>
<tr class="even">
<td>cyl</td>
<td>integer</td>
<td>Number of cylinders</td>
</tr>
<tr class="odd">
<td>disp</td>
<td>double</td>
<td>Displacement (cu.in.)</td>
</tr>
<tr class="even">
<td>hp</td>
<td>double</td>
<td>Gross horsepower</td>
</tr>
<tr class="odd">
<td>drat</td>
<td>double</td>
<td>Rear axle ratio</td>
</tr>
<tr class="even">
<td>wt</td>
<td>double</td>
<td>Weight (1000 lbs)</td>
</tr>
<tr class="odd">
<td>qsec</td>
<td>double</td>
<td>1/4 mile time</td>
</tr>
<tr class="even">
<td>vs</td>
<td>logical</td>
<td>Engine (0 = V-shaped, 1 = straight)</td>
</tr>
<tr class="odd">
<td>am</td>
<td>logical</td>
<td>Transmission (0 = automatic, 1 = manual)</td>
</tr>
<tr class="even">
<td>gear</td>
<td>ordered</td>
<td>Number of forward gears</td>
</tr>
<tr class="odd">
<td>carb</td>
<td>integer</td>
<td>Number of carburetors</td>
</tr>
<tr class="even">
<td>country</td>
<td>factor</td>
<td>Country of car manufacturer</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">var_cars</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 12</span></span></span>
<span><span class="co">#&gt;      mpg   cyl  disp    hp  drat    wt  qsec vs    am    gear   carb country</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  21       6  160    110  3.9   2.62  16.5 FALSE TRUE  four      4 Japan  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  21       6  160    110  3.9   2.88  17.0 FALSE TRUE  four      4 Japan  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  22.8     4  108     93  3.85  2.32  18.6 TRUE  TRUE  four      1 Japan  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  21.4     6  258    110  3.08  3.22  19.4 TRUE  FALSE three     1 USA    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  18.7     8  360    175  3.15  3.44  17.0 FALSE FALSE three     2 USA    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  18.1     6  225    105  2.76  3.46  20.2 TRUE  FALSE three     1 USA    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  14.3     8  360    245  3.21  3.57  15.8 FALSE FALSE three     4 USA    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  24.4     4  147.    62  3.69  3.19  20   TRUE  FALSE four      2 Germany</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  22.8     4  141.    95  3.92  3.15  22.9 TRUE  FALSE four      2 Germany</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  19.2     6  168.   123  3.92  3.44  18.3 TRUE  FALSE four      4 Germany</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">var_cars</span><span class="op">)</span></span>
<span><span class="co">#&gt;       mpg             cyl             disp             hp       </span></span>
<span><span class="co">#&gt;  Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  </span></span>
<span><span class="co">#&gt;  1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  </span></span>
<span><span class="co">#&gt;  Median :19.20   Median :6.000   Median :196.3   Median :123.0  </span></span>
<span><span class="co">#&gt;  Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  </span></span>
<span><span class="co">#&gt;  3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  </span></span>
<span><span class="co">#&gt;  Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  </span></span>
<span><span class="co">#&gt;       drat             wt             qsec           vs         </span></span>
<span><span class="co">#&gt;  Min.   :2.760   Min.   :1.513   Min.   :14.50   Mode :logical  </span></span>
<span><span class="co">#&gt;  1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   FALSE:18       </span></span>
<span><span class="co">#&gt;  Median :3.695   Median :3.325   Median :17.71   TRUE :14       </span></span>
<span><span class="co">#&gt;  Mean   :3.597   Mean   :3.217   Mean   :17.85                  </span></span>
<span><span class="co">#&gt;  3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90                  </span></span>
<span><span class="co">#&gt;  Max.   :4.930   Max.   :5.424   Max.   :22.90                  </span></span>
<span><span class="co">#&gt;      am             gear         carb          country  </span></span>
<span><span class="co">#&gt;  Mode :logical   three:15   Min.   :1.000   Germany: 8  </span></span>
<span><span class="co">#&gt;  FALSE:19        four :12   1st Qu.:2.000   Italy  : 4  </span></span>
<span><span class="co">#&gt;  TRUE :13        five : 5   Median :2.000   Japan  : 6  </span></span>
<span><span class="co">#&gt;                             Mean   :2.812   Sweden : 1  </span></span>
<span><span class="co">#&gt;                             3rd Qu.:4.000   UK     : 1  </span></span>
<span><span class="co">#&gt;                             Max.   :8.000   USA    :12</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modelling-with-ale-and-gam">Modelling with ALE and GAM<a class="anchor" aria-label="anchor" href="#modelling-with-ale-and-gam"></a>
</h2>
<p>With GAM, only numeric variables can be smoothed, not binary or
categorical ones. However, smoothing does not always help improve the
model since some variables are not related to the outcome and some that
are related actually do have a simple linear relationship. To keep this
demonstration simple, we have done some earlier analysis (not shown
here) that determines where smoothing is worthwhile on the modified
<code>var_cars</code> dataset, so only some of the numeric variables are
smoothed. Our goal here is not to demonstrate the best modelling
procedure but rather to demonstrate the flexibility of the
<code>ale</code> package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="fu">mgcv</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">gam</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">disp</span> <span class="op">+</span> <span class="va">hp</span> <span class="op">+</span> <span class="va">drat</span> <span class="op">+</span> <span class="va">wt</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">s</a></span><span class="op">(</span><span class="va">qsec</span><span class="op">)</span> <span class="op">+</span></span>
<span>                  <span class="va">vs</span> <span class="op">+</span> <span class="va">am</span> <span class="op">+</span> <span class="va">gear</span> <span class="op">+</span> <span class="va">carb</span> <span class="op">+</span> <span class="va">country</span>,</span>
<span>                data <span class="op">=</span> <span class="va">var_cars</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cm</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Family: gaussian </span></span>
<span><span class="co">#&gt; Link function: identity </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Formula:</span></span>
<span><span class="co">#&gt; mpg ~ cyl + disp + hp + drat + wt + s(qsec) + vs + am + gear + </span></span>
<span><span class="co">#&gt;     carb + country</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parametric coefficients:</span></span>
<span><span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)   </span></span>
<span><span class="co">#&gt; (Intercept)   -7.84775   12.47080  -0.629  0.54628   </span></span>
<span><span class="co">#&gt; cyl            1.66078    1.09449   1.517  0.16671   </span></span>
<span><span class="co">#&gt; disp           0.06627    0.01861   3.561  0.00710 **</span></span>
<span><span class="co">#&gt; hp            -0.01241    0.02502  -0.496  0.63305   </span></span>
<span><span class="co">#&gt; drat           4.54975    1.48971   3.054  0.01526 * </span></span>
<span><span class="co">#&gt; wt            -5.03737    1.53979  -3.271  0.01095 * </span></span>
<span><span class="co">#&gt; vsTRUE        12.45630    3.62342   3.438  0.00852 **</span></span>
<span><span class="co">#&gt; amTRUE         8.77813    2.67611   3.280  0.01080 * </span></span>
<span><span class="co">#&gt; gear.L         0.53111    3.03337   0.175  0.86525   </span></span>
<span><span class="co">#&gt; gear.Q         0.57129    1.18201   0.483  0.64150   </span></span>
<span><span class="co">#&gt; carb          -0.34479    0.78600  -0.439  0.67223   </span></span>
<span><span class="co">#&gt; countryItaly  -0.08633    2.22316  -0.039  0.96995   </span></span>
<span><span class="co">#&gt; countryJapan  -3.31948    2.22723  -1.490  0.17353   </span></span>
<span><span class="co">#&gt; countrySweden -3.83437    2.74934  -1.395  0.19973   </span></span>
<span><span class="co">#&gt; countryUK     -7.24222    3.81985  -1.896  0.09365 . </span></span>
<span><span class="co">#&gt; countryUSA    -7.69317    2.37998  -3.232  0.01162 * </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Approximate significance of smooth terms:</span></span>
<span><span class="co">#&gt;           edf Ref.df     F p-value  </span></span>
<span><span class="co">#&gt; s(qsec) 7.797  8.641 5.975  0.0101 *</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; R-sq.(adj) =  0.955   Deviance explained = 98.8%</span></span>
<span><span class="co">#&gt; GCV = 6.4263  Scale est. = 1.6474    n = 32</span></span></code></pre></div>
<p>Before starting, we recommend that you enable progress bars to see
how long procedures will take. Simply run the following code at the
beginning of your R session:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run this in an R console; it will not work directly within an R Markdown or Quarto block</span></span>
<span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span>global <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">progressr</span><span class="fu">::</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span><span class="st">'cli'</span><span class="op">)</span></span></code></pre></div>
<p>If you forget to do that, the <a href="https://github.com/tripartio/ale" class="external-link">ale</a> package will do it
automatically for you with a notification message.</p>
<p>Now we generate ALE data from the <code>var_cars</code> GAM model and
plot it.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cars_ale</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ale.html">ale</a></span><span class="op">(</span></span>
<span>  <span class="va">var_cars</span>, <span class="va">cm</span>,</span>
<span>  parallel <span class="op">=</span> <span class="fl">2</span>  <span class="co"># CRAN limit (delete this line on your own computer)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print all plots</span></span>
<span><span class="va">cars_ale</span><span class="op">$</span><span class="va">plots</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/wrap_plots.html" class="external-link">wrap_plots</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="ale-x-datatypes_files/figure-html/cars_ale-1.png" width="672"></p>
<p>We can see that <code>ale</code> has no trouble modelling any of the
datatypes in our sample (logical, factor, ordered, integer, or double).
It plots line charts for the numeric predictors and column charts for
everything else.</p>
<p>The numeric predictors have rug plots that indicate in which ranges
of the x (predictor) and y (<code>mpg</code>) values data actually
exists in the dataset. This helps us to not over-interpret regions where
data is sparse. Since column charts are on a discrete scale, they cannot
rug plots. Instead, the percentage of data represented by each column is
displayed.</p>
<p>We can also generate and plot the ALE data for all two-way
interactions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cars_ale_ixn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ale_ixn.html">ale_ixn</a></span><span class="op">(</span></span>
<span>  <span class="va">var_cars</span>, <span class="va">cm</span>,</span>
<span>  parallel <span class="op">=</span> <span class="fl">2</span>  <span class="co"># CRAN limit (delete this line on your own computer)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print plots</span></span>
<span><span class="va">cars_ale_ixn</span><span class="op">$</span><span class="va">plots</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># extract list of x1 ALE outputs</span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">walk</a></span><span class="op">(</span>\<span class="op">(</span><span class="va">.x1</span><span class="op">)</span> <span class="op">{</span>  </span>
<span>    <span class="co"># plot all x2 plots in each .x1 element</span></span>
<span>    <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/wrap_plots.html" class="external-link">wrap_plots</a></span><span class="op">(</span><span class="va">.x1</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p><img src="ale-x-datatypes_files/figure-html/cars_ale_ixn-1.png" width="672"><img src="ale-x-datatypes_files/figure-html/cars_ale_ixn-2.png" width="672"><img src="ale-x-datatypes_files/figure-html/cars_ale_ixn-3.png" width="672"><img src="ale-x-datatypes_files/figure-html/cars_ale_ixn-4.png" width="672"><img src="ale-x-datatypes_files/figure-html/cars_ale_ixn-5.png" width="672"><img src="ale-x-datatypes_files/figure-html/cars_ale_ixn-6.png" width="672"></p>
<p>There are no interactions in this dataset. (To see what ALE
interaction plots look like in the presence of interactions, see the <a href="ale-ALEPlot.html">{ALEPlot} comparison vignette</a>, which
explains the interaction plots in more detail.)</p>
<p>Finally, as explained in the vignette on modelling with <a href="ale-small-datasets.html" title="ale package for small datasets">small datasets</a>, a more
appropriate modelling workflow would require bootstrapping the entire
model, not just the ALE data. So, let’s do that now.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_bootstrap.html">model_bootstrap</a></span><span class="op">(</span></span>
<span>  <span class="va">var_cars</span>, </span>
<span>  <span class="va">cm</span>,</span>
<span>  boot_it <span class="op">=</span> <span class="fl">10</span>,  <span class="co"># 100 by default but reduced here for a faster demonstration</span></span>
<span>  parallel <span class="op">=</span> <span class="fl">2</span>,  <span class="co"># CRAN limit (delete this line on your own computer)</span></span>
<span>  seed <span class="op">=</span> <span class="fl">2</span>  <span class="co"># workaround to avoid random error on such a small dataset</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">mb</span><span class="op">$</span><span class="va">ale</span><span class="op">$</span><span class="va">plots</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">patchwork</span><span class="fu">::</span><span class="fu"><a href="https://patchwork.data-imaginist.com/reference/wrap_plots.html" class="external-link">wrap_plots</a></span><span class="op">(</span>ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="ale-x-datatypes_files/figure-html/cars_full-1.png" width="672"></p>
<p>(By default, <code><a href="../reference/model_bootstrap.html">model_bootstrap()</a></code> creates 100 bootstrap
samples but, so that this illustration runs faster, we demonstrate it
here with only 10 iterations.)</p>
<p>With such a small dataset, the bootstrap confidence interval always
overlap with the middle band, indicating that this dataset cannot
support any claims that any of its variables has a meaningful effect on
fuel efficiency (mpg). Considering that the average bootstrapped ALE
values suggest various intriguing patterns, the problem is no doubt that
the dataset is too small–if more data were collected and analyzed, some
of the patterns would probably be confirmed.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Chitu Okoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
